---
title : 浏览器磁盘缓存
---
### 磁盘缓存
---

#### 问题：使用window.history.go(-1)返回上一页刷新，出现浏览使用磁盘缓存请求接口的问题，没有实际请求接口新数据。

#### 解决方法尝试记录：

#### 一、在需要刷新的页面判断
```
window.onpageshow = function (event) {
    if (event.persisted || window.performance &&
        window.performance.navigation.type == 2) {
        window.location.reload();
    }
}
```
>#### window.onpageshow存在浏览器兼容性问题
>   |事件|IE|Chrome|FireFox|Safari
>:-:|:-:|:-:|:-:|:-:|:-:|
>第一次加载|onload|触发|触发|触发|触发|
>第一次加载|onpageshow|不触发|触发|触发|触发|
>其他页面返回|onload|触发|触发|不触发|不触发|
>其他页面返回|onpageshow|不触发|触发|触发|触发|

#### 二、已隐藏
<!-- #### 二、使用开发工具本身依赖的页面tab容器提供的方法
```
// 获取当前页面tab
const getCurrentTab = window.parent.tabs.getCurrentTab()
// 获取前一页tab并调用刷新方法
getCurrentTab.prevTab().refresh()
``` -->

#### 三、直接跳转路由
```
window.location.href = window.localHost + 'xx/xxxx/xx'
```