### 记一次大文件误提交报错解决
---

当Git仓库中不小心有一个超过100MB的文件，并且不小心Commit后，会出现如下报错：
```
remote: error: GH001: Large files detected. You may want to try Git Large File Storage - https://git-lfs.github.com.
remote: error: Trace: cc5b9de7356152c0194da63d929b1c66
remote: error: See http://git.io/iEPt8g for more information.
remote: error: File Weka/dataset-bug-classification/mozilla_firefox.csv is 118.64 MB; this exceeds GitHub's file size limit of 100.00 MB
```

使用如下 git 命令
```
git filter-branch -f --index-filter 'git rm --cached --ignore-unmatch Weka/dataset-bug-classification/mozilla_firefox.csv'
// Weka/dataset-bug-classification/mozilla_firefox.csv 为文件路径，即remote: error: File后面提示的文件路径
```
或
```
git filter-branch -f --tree-filter 'rm -f /path/to/file' HEAD --all
```
大概原理是，删除大文件，重新生成 commit，但运行后又出现问题：
```
Cannot rewrite branches: You have unstaged changes.
```
一种较为暴力的解决方法：
```
git stash
```
解决后，再次修复
```
git filter-branch -f --index-filter 'git rm --cached --ignore-unmatch 文件路径'
```
可以看到
```
Rewrite 11983344a8934d6e9a7a1e225e6d0f6daf3923a4 (15/21)rm 'system_status/test_26457'
Rewrite 49ac22cd47b0504350d3643ff77b09b14f01ed03 (16/21)rm 'system_status/test_26457'
Rewrite 8a721565399d929514e3ed4661ea7c938074eb32 (17/21)rm 'system_status/test_26457'
Rewrite 6e9e291690bdd9923daef62a18d08229dc30a320 (21/21)
Ref 'refs/heads/master' was rewritten
```
重新提交, 完成
```
git push
```