---
titile: Http
---

Post 为什么会发送两次请求？
---
当你发现一个 POST 请求被发送了两次，可能存在以下几种情况：

1. **浏览器的预检请求：** 对于一些跨域的 POST 请求，浏览器会首先发送一个 OPTIONS 请求作为预检（preflight）请求，先询问服务器是否允许该 POST 请求。如果服务器响应允许，浏览器才会执行实际的 POST 请求。所以实际上只有一个 POST 请求被发送。

2. **重定向（Redirection）：** 如果服务器返回一个 3xx （重定向状态码）的响应，浏览器会对返回的 Location URL 发起新的请求，这个新的请求可能成为了你看到的第二个 POST 请求。

3. **代码问题：** 可能是由于代码中的 bug，比如事件处理程序被错误地绑定了两次，或者同一个请求在其他部分的代码中无意中被重复调用。

4. **服务端问题：** 在某些情况下，可能是服务器或者代理配置有问题，导致浏览器会发送两次一模一样的请求。

5. **Cache 问题：** 如果根据 HTTP Cache 规则，POST 请求没有相关 Cache-Control headers 或者有但未正确配置，浏览器在某种情况下可能会再次发送相同的 POST 请求。

要找出具体原因，可以检查网络请求日志，看看二者是否有预检请求，请求头是否完全一样等等。或者检查应用代码，验证 POST 请求是否被触发了两次。对于服务端问题，可能需要额外调查服务器和代理的相关配置。

- 1xx（信息响应）
- 2xx（成功响应）
- 3xx（重定向）
- 4xx（客户端错误）
- 5xx（服务器错误）

在 3xx 类别中，常见的状态码有：

- 300 Multiple Choices：请求有多种可能的响应。用户或用户代理可以自由选择一个或多个中的一个进行进一步处理。
- 301 Moved Permanently：被请求的资源已被永久移动到另一位置，并提供了新的 URL。所有的将来的请求应使用返回的这一新 URL 来进行。
- 302 Found：要求客户端执行临时重定向（原始的描述短语是 "Moved Temporarily"），但预期的是客户端仍然使用原始的 URL 进行将来的请求。
- 303 See Other：请求的资源存在于一个不同的 URL，应使用 GET 方法获取。
- 304 Not Modified：资源自从上次请求后未改变，服务器返回此状态码表示请求的资源未被修改，因此客户端无需下载。

短链的实现
---
todo

跨域的解决
---
todo
1. 前端视角
todo
2. 后端视角
todo

