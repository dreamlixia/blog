(window.webpackJsonp=window.webpackJsonp||[]).push([[47],{451:function(e,t,a){"use strict";a.r(t);var n=a(56),s=Object(n.a)({},(function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("ContentSlotsDistributor",{attrs:{"slot-key":e.$parent.slotKey}},[a("h3",{attrs:{id:"实现一个简单的富文本编辑器"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#实现一个简单的富文本编辑器"}},[e._v("#")]),e._v(" 实现一个简单的富文本编辑器")]),e._v(" "),a("hr"),e._v(" "),a("h4",{attrs:{id:"一、在-html-文档中实现富文本编辑器"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#一、在-html-文档中实现富文本编辑器"}},[e._v("#")]),e._v(" 一、在 HTML 文档中实现富文本编辑器")]),e._v(" "),a("h4",{attrs:{id:"方式一-iframe"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#方式一-iframe"}},[e._v("#")]),e._v(" 方式一： iframe")]),e._v(" "),a("p",[e._v("通过设置属性designMode为on来使文档可编辑，但只有当文档完全加载后才可以设置。")]),e._v(" "),a("div",{staticClass:"language- extra-class"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[e._v("<iframe name=\"editor\" style=\"width: 600px; height: 400px\"></iframe>\n\n<script>\n\n    window.addEventListener('load', () => {\n\n        frames['editor'].document.designMode = 'on'\n\n    })\n\n<\/script>\n")])])]),a("h4",{attrs:{id:"方式二-contenteditable"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#方式二-contenteditable"}},[e._v("#")]),e._v(" 方式二：contenteditable")]),e._v(" "),a("p",[e._v("通过给元素本身设置contenteditable属性为true或者空字符串，可以使元素立刻可编辑。")]),e._v(" "),a("div",{staticClass:"language- extra-class"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[e._v('<div class="editor" id="editor" contenteditable="true"></div>\n')])])]),a("p",[e._v("元素包含的任何文本都会被自动编辑，元素本身类似于textarea元素，也可以随时使元素切换元素的可编辑状态。")]),e._v(" "),a("div",{staticClass:"language- extra-class"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[e._v("<div class=\"editorBox\" id=\"editorBox\"></div>\n\nlet editBox = document.getElementById('editorBox')\n\neditBox.contentEditable = 'true'\n\n")])])]),a("h4",{attrs:{id:"二、与富文本交互"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#二、与富文本交互"}},[e._v("#")]),e._v(" 二、与富文本交互")]),e._v(" "),a("p",[e._v("iframe:")]),e._v(" "),a("div",{staticClass:"language- extra-class"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[e._v('// 在内嵌窗格中切换粗体文本样式\nframes["editor"].document.execCommand("bold", false, null);\n// 在内嵌窗格中切换斜体文本样式\nframes["editor"].document.execCommand("italic", false, null);\n// 在内嵌窗格中创建指向www.wrox.com 的链接\nframes["editor"].document.execCommand("createlink", false, "http://www.wrox.com");\n// 在内嵌窗格中为内容添加<h1>标签\nframes["editor"].document.execCommand("formatblock", false, "<h1>");\n')])])]),a("p",[e._v("contenteditable:")]),e._v(" "),a("div",{staticClass:"language- extra-class"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[e._v('// 切换粗体文本样式\ndocument.execCommand("bold", false, null);\n// 切换斜体文本样式\ndocument.execCommand("italic", false, null);\n// 创建指向www.wrox.com 的链接\ndocument.execCommand("createlink", false, "http://www.wrox.com");\n// 为内容添加<h1>标签\ndocument.execCommand("formatblock", false, "<h1>");\n')])])]),a("h4",{attrs:{id:"富文件选区"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#富文件选区"}},[e._v("#")]),e._v(" 富文件选区")]),e._v(" "),a("p",[e._v("通过getSelection() 方法获取文本选区")]),e._v(" "),a("div",{staticClass:"language- extra-class"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[e._v('// 使用 Selection 对象实现选中文本高亮，经测试发现此方法在iframe的方式内不生效。\n\nfunction highlight() {\n\n    // 取得表示选区的范围\n    let selection = document.getSelection();\n    \n    // 高亮选中的文本\n    let range = selection.getRangeAt(0);\n   \n    // 给选中文本添加背景为黄色的<span>标签\n    let span = document.createElement("span");\n    span.style.backgroundColor = "yellow";\n    \n    range.surroundContents(span);\n\n}\n')])])]),a("h4",{attrs:{id:"通过表单提交富文本"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#通过表单提交富文本"}},[e._v("#")]),e._v(" 通过表单提交富文本")]),e._v(" "),a("p",[e._v('因为富文本编辑不是在表单控件中实现，这意味着要将富文本编辑结果提交给服务器，就要手动进行。我们会在表单中添加一个 type="hidden" 的字段，在提交表单时，通过监听器，从元素中提取出 HTML 并插入隐藏字段中。')]),e._v(" "),a("p",[e._v("iframe:")]),e._v(" "),a("div",{staticClass:"language- extra-class"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[e._v('// form 实例是`<form>` 元素，可以使用DOM获取\n\nform.addEventListener("submit", (event) => {\n\n    let target = event.target;\n\n    target.elements["content"].value = frames["editor"].document.body.innerHTML;\n\n});\n\n')])])]),a("p",[e._v("contenteditable:")]),e._v(" "),a("div",{staticClass:"language- extra-class"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[e._v('// form 实例是`<form>` 元素，可以使用DOM获取\n\nform.addEventListener("submit", (event) => {\n\n    let target = event.target;\n\n    target.elements["content"].value = document.getElementsByClassName("editor")[0].innerHTML;\n\n});\n\n')])])]),e._v(" "),a("comment-comment")],1)}),[],!1,null,null,null);t.default=s.exports}}]);