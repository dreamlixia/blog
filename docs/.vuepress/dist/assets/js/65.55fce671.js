(window.webpackJsonp=window.webpackJsonp||[]).push([[65],{484:function(t,e,i){"use strict";i.r(e);var a=i(27),_=Object(a.a)({},(function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("ContentSlotsDistributor",{attrs:{"slot-key":t.$parent.slotKey}},[i("h3",{attrs:{id:"回流和重绘"}},[i("a",{staticClass:"header-anchor",attrs:{href:"#回流和重绘"}},[t._v("#")]),t._v(" 回流和重绘")]),t._v(" "),i("p",[t._v("回流一定会触发重绘，而重绘不一定触发回流。")]),t._v(" "),i("h2",{attrs:{id:"_1-回流-重排"}},[i("a",{staticClass:"header-anchor",attrs:{href:"#_1-回流-重排"}},[t._v("#")]),t._v(" 1.回流（重排）")]),t._v(" "),i("p",[t._v("以视区的大小为基础，布局通常从body开始，用每个元素的框模型属性排列所有body子孙元素的尺寸，为不知道其尺寸的替换元素（如图像）提供占位符空间，即计算他们在设备视口（viewport）内的确切位置和大小的阶段叫做回流。")]),t._v(" "),i("h2",{attrs:{id:"_2-重绘"}},[i("a",{staticClass:"header-anchor",attrs:{href:"#_2-重绘"}},[t._v("#")]),t._v(" 2.重绘")]),t._v(" "),i("p",[t._v("将渲染树的每个节点都转化为屏幕上的实际像素，这个阶段叫重绘节点。也就是在屏幕上绘制图形，但是如背景颜色发生变化，会引起重绘，但不会触发回流。")]),t._v(" "),i("h2",{attrs:{id:"_3-触发回流和重绘的操作"}},[i("a",{staticClass:"header-anchor",attrs:{href:"#_3-触发回流和重绘的操作"}},[t._v("#")]),t._v(" 3.触发回流和重绘的操作")]),t._v(" "),i("ol",[i("li",[t._v("添加或者删除dom元素；")]),t._v(" "),i("li",[t._v("改变dom原素的尺寸大小（宽、高、边距、边框等）；")]),t._v(" "),i("li",[t._v("页面一开始加载的时候；")]),t._v(" "),i("li",[t._v("元素的位置发生变化；")]),t._v(" "),i("li",[t._v("浏览器窗口大小发生变化；")])]),t._v(" "),i("h2",{attrs:{id:"_4-浏览器的优化机制"}},[i("a",{staticClass:"header-anchor",attrs:{href:"#_4-浏览器的优化机制"}},[t._v("#")]),t._v(" 4.浏览器的优化机制")]),t._v(" "),i("p",[t._v("由于每次重排（回流）都会造成额外的计算消耗，所以现代浏览器会通过队列化修改并批量执行来优化重排过程。但是在获取布局信息操作的时候，会强制队列刷新，比如访问以下属性或方法：")]),t._v(" "),i("ul",[i("li",[t._v("scrollTop、scrollLeft、scrollLeft、scrollHeight;")]),t._v(" "),i("li",[t._v("clientTop、clientLeft、clientLeft、clientHeight;")]),t._v(" "),i("li",[t._v("offsetTop、offsetLeft、offsetLeft、offsetHeight;")]),t._v(" "),i("li",[t._v("getComputedStyle();")]),t._v(" "),i("li",[t._v("getBoundingRect();\n以上属性和方法都需要返回最新的布局信息，因此浏览器不得不清空队列，触发回流重绘来返回正确的值。因此我们在修改样式的时候，尽量避免使用这些属性，他们都会刷新渲染队列，如果要使用，最好将值缓存起来。")])]),t._v(" "),i("h2",{attrs:{id:"_5-减少回流和重绘的方法"}},[i("a",{staticClass:"header-anchor",attrs:{href:"#_5-减少回流和重绘的方法"}},[t._v("#")]),t._v(" 5.减少回流和重绘的方法")]),t._v(" "),i("ol",[i("li",[t._v('合并多个dom操作一起执行，element.style.cssText += ""; element.className += "";')]),t._v(" "),i("li",[t._v("必须使用布局操作的时候，如offsetTop等，先把值保存起来再使用；")]),t._v(" "),i("li",[t._v("使用浮动，float；绝对定位，absolute；固定定位，fixed；使节点脱离文档流，display: none；")])]),t._v(" "),i("h4",{attrs:{id:"扩展-display-none-visibility-hidden-opacity-0-的区别"}},[i("a",{staticClass:"header-anchor",attrs:{href:"#扩展-display-none-visibility-hidden-opacity-0-的区别"}},[t._v("#")]),t._v(" 扩展：display: none; visibility: hidden; opacity: 0 的区别")]),t._v(" "),i("table",[i("thead",[i("tr",[i("th",{staticStyle:{"text-align":"center"}},[t._v("---")]),t._v(" "),i("th",{staticStyle:{"text-align":"center"}},[t._v("display: none")]),t._v(" "),i("th",{staticStyle:{"text-align":"center"}},[t._v("visibility: hidden")]),t._v(" "),i("th",{staticStyle:{"text-align":"center"}},[t._v("opacity: 0")])])]),t._v(" "),i("tbody",[i("tr",[i("td",{staticStyle:{"text-align":"center"}},[t._v("页面中")]),t._v(" "),i("td",{staticStyle:{"text-align":"center"}},[t._v("不存在")]),t._v(" "),i("td",{staticStyle:{"text-align":"center"}},[t._v("存在")]),t._v(" "),i("td",{staticStyle:{"text-align":"center"}},[t._v("存在")])]),t._v(" "),i("tr",[i("td",{staticStyle:{"text-align":"center"}},[t._v("重排")]),t._v(" "),i("td",{staticStyle:{"text-align":"center"}},[t._v("会")]),t._v(" "),i("td",{staticStyle:{"text-align":"center"}},[t._v("不会")]),t._v(" "),i("td",{staticStyle:{"text-align":"center"}},[t._v("不会")])]),t._v(" "),i("tr",[i("td",{staticStyle:{"text-align":"center"}},[t._v("重绘")]),t._v(" "),i("td",{staticStyle:{"text-align":"center"}},[t._v("会")]),t._v(" "),i("td",{staticStyle:{"text-align":"center"}},[t._v("会")]),t._v(" "),i("td",{staticStyle:{"text-align":"center"}},[t._v("不一定")])]),t._v(" "),i("tr",[i("td",{staticStyle:{"text-align":"center"}},[t._v("自身绑定事件")]),t._v(" "),i("td",{staticStyle:{"text-align":"center"}},[t._v("不触发")]),t._v(" "),i("td",{staticStyle:{"text-align":"center"}},[t._v("不触发")]),t._v(" "),i("td",{staticStyle:{"text-align":"center"}},[t._v("可触发")])]),t._v(" "),i("tr",[i("td",{staticStyle:{"text-align":"center"}},[t._v("transition")]),t._v(" "),i("td",{staticStyle:{"text-align":"center"}},[t._v("不支持")]),t._v(" "),i("td",{staticStyle:{"text-align":"center"}},[t._v("支持")]),t._v(" "),i("td",{staticStyle:{"text-align":"center"}},[t._v("支持")])]),t._v(" "),i("tr",[i("td",{staticStyle:{"text-align":"center"}},[t._v("子元素可复原")]),t._v(" "),i("td",{staticStyle:{"text-align":"center"}},[t._v("不能")]),t._v(" "),i("td",{staticStyle:{"text-align":"center"}},[t._v("能")]),t._v(" "),i("td",{staticStyle:{"text-align":"center"}},[t._v("不能")])]),t._v(" "),i("tr",[i("td",{staticStyle:{"text-align":"center"}},[t._v("被遮挡的元素可触发事件")]),t._v(" "),i("td",{staticStyle:{"text-align":"center"}},[t._v("能")]),t._v(" "),i("td",{staticStyle:{"text-align":"center"}},[t._v("能")]),t._v(" "),i("td",{staticStyle:{"text-align":"center"}},[t._v("不能")])])])]),t._v(" "),i("comment-comment")],1)}),[],!1,null,null,null);e.default=_.exports}}]);